"use strict";function isEscEvent(e){return 27===e.keyCode||"Escape"===e.key||"Esc"===e.key}function scrollToElement(e){e.scrollIntoView({behavior:"smooth",block:"start"})}function smoothAnchorScroll(){document.querySelectorAll('a[href^="#"]:not(a[href="#"]').forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.getAttribute("href");scrollToElement(document.querySelector(n))}))}))}smoothAnchorScroll();var navMain=document.querySelector(".main-nav"),navMainMode=document.querySelector(".main-nav__mode"),navLink=navMainMode.querySelectorAll(".main-nav__link"),navToggle=navMainMode.querySelector(".main-nav__toggle");function hideMenu(){navToggle.setAttribute("aria-label","Закрыть меню"),navMainMode.classList.remove("main-nav__mode--opened"),navMainMode.classList.add("main-nav__mode--closed"),document.body.classList.remove("page-no-scroll")}function onNavLinkClick(){for(var e=0;e<navLink.length;e++)navLink[e].addEventListener("click",(function(){hideMenu()}))}function closeOnEsc(e){isEscEvent(e)&&(e.preventDefault(),hideMenu(),document.removeEventListener("keydown",closeOnEsc))}function showMenu(){navToggle.setAttribute("aria-label","Открыть меню"),navMainMode.classList.remove("main-nav__mode--closed"),navMainMode.classList.add("main-nav__mode--opened"),document.body.classList.add("page-no-scroll"),document.addEventListener("keydown",closeOnEsc)}function onNavToggleClick(){navMain.classList.remove("main-nav--nojs"),navMainMode.classList.remove("main-nav__mode--nojs"),navToggle.addEventListener("click",(function(){navMainMode.classList.contains("main-nav__mode--closed")?showMenu():hideMenu()}))}onNavToggleClick(),onNavLinkClick();var form=document.querySelector(".form__content"),nameInput=form.querySelector('input[type="text"]'),phoneInput=form.querySelector('input[type="tel"]'),formButton=form.querySelector('button[type="submit"]'),nameRegex=/^[A-Za-zА-Яа-яЁё\s]+$/,phoneRegex=/^((\+7|7|8)+([0-9]){10})$/,MIN_NUMBERS_LENGTH=16,errorMessage="Пожалуйста, проверьте правильность введенных данных";function createPhoneMask(e){var t=0,n="+7(___) ___-__-__",o=n.replace(/\D/g,""),a=e.target.value.replace(/\D/g,"");o.length>=a.length&&(a=o),e.target.value=n.replace(/./g,(function(e){return/[_\d]/.test(e)&&t<a.length?a.charAt(t++):t>=a.length?"":e}))}function checkPhoneFocus(e){e.addEventListener("focus",(function(t){0===e.value.length&&(t.target.value="+7")})),e.addEventListener("blur",(function(t){"+7"===e.value&&(t.target.value="")}))}function showError(e){e.validity.valid?e.classList.remove("form__input-error"):e.classList.add("form__input-error")}function checkNameField(e,t){var n=t.value;n?e.test(n)?(t.setCustomValidity(""),showError(t)):(t.setCustomValidity(errorMessage),showError(t)):(t.setCustomValidity("Пожалуйста, введите Ваше имя"),showError(t)),t.reportValidity()}function checkPhoneField(e,t){var n=t.value.replace(/\D/g,""),o=n.length;0===o?(t.setCustomValidity("Пожалуйста, введите номер"),showError(t)):o<MIN_NUMBERS_LENGTH&&!e.test(n)?(t.setCustomValidity(errorMessage),showError(t)):e.test(n)?(t.setCustomValidity(""),showError(t)):(t.setCustomValidity(errorMessage),showError(t)),t.reportValidity()}checkPhoneFocus(phoneInput),phoneInput.addEventListener("keypress",(function(e){/\d/.test(e.key)?(phoneInput.setCustomValidity(""),showError(phoneInput)):(e.preventDefault(),showError(phoneInput))})),phoneInput.addEventListener("input",createPhoneMask),nameInput.addEventListener("input",(function(e){checkNameField(nameRegex,e.target)})),phoneInput.addEventListener("input",(function(e){checkPhoneField(phoneRegex,e.target)}));var storageName="",storageTel="";function isStorage(){try{return storageName=localStorage.getItem("userName"),storageTel=localStorage.getItem("userPhone"),!0}catch(e){return!1}}var isStorageSupport=isStorage();function saveFormData(){isStorageSupport&&(localStorage.setItem("userName",nameInput.value),localStorage.setItem("userPhone",phoneInput.value))}function fillForm(){isStorage(),storageName&&storageTel?(nameInput.value=storageName,phoneInput.value=storageTel):storageName?nameInput.value=storageName:phoneInput.value=storageTel}fillForm(),formButton.addEventListener("click",(function(){saveFormData()}));